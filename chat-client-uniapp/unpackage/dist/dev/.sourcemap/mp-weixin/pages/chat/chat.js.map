{"version":3,"file":"chat.js","sources":["pages/chat/chat.vue","pages/chat/chat.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"chat-container\">\n    <ContactList \n      :users=\"contacts\" \n      :selectedUserId=\"targetId\" \n      @select=\"handleSelectUser\" \n    />\n\n    <scroll-view scroll-y class=\"msg-list\">\n      <view v-for=\"(item, index) in messages\" :key=\"index\" class=\"msg-item\">\n        <text>{{ item.from }}: {{ item.text }}</text>\n      </view>\n    </scroll-view>\n\n    <view class=\"input-box\">\n      <input v-model=\"inputMsg\" placeholder=\"输入消息...\" class=\"msg-input\"/>\n      <button @click=\"sendMsg\">发送</button>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { connectSocket, sendMsg } from '@/utils/socket.js'\nimport ContactList from '@/components/ContactList.vue'\n\nexport default {\n  components: { ContactList },\n  data() {\n    return {\n      messages: [],\n      inputMsg: '',\n      userId: '',\n      targetId: '',\n      contacts: [\n        { id: 'user1', name: '用户一' },\n        { id: 'user2', name: '用户二' },\n        { id: 'user3', name: '用户三' }\n      ]\n    }\n  },\n  onLoad(options) {\n    this.userId = options.userId || 'user1';\n    // 默认私聊对象为自己以外的第一个联系人\n    this.targetId = this.contacts.find(c => c.id !== this.userId)?.id || '';\n    connectSocket(this.userId, (msg) => {\n      this.messages.push(msg)\n    })\n  },\n  methods: {\n    sendMsg() {\n      if (!this.inputMsg) return;\n      sendMsg(this.targetId, this.inputMsg, this.userId)\n      this.messages.push({ from: this.userId, text: this.inputMsg })\n      this.inputMsg = ''\n    },\n    handleSelectUser(userId) {\n      this.targetId = userId\n      // 你可以选择清空消息或加载聊天记录\n      // this.messages = []\n    }\n  }\n}\n</script>\n\n<style>\n.chat-container { display: flex; flex-direction: column; height: 100%; }\n.msg-list { flex: 1; padding: 10px; }\n.msg-item { margin: 5px 0; }\n.input-box { display: flex; padding: 10px; }\n.msg-input { flex: 1; border: 1px solid #ccc; padding: 5px; }\n</style>","import MiniProgramPage from '/Users/Zhuanz/Documents/t-io/chat-system/chat-client-uniapp/pages/chat/chat.vue'\nwx.createPage(MiniProgramPage)"],"names":["connectSocket","sendMsg"],"mappings":";;;AAuBA,oBAAoB,MAAW;AAE/B,MAAK,YAAU;AAAA,EACb,YAAY,EAAE,YAAa;AAAA,EAC3B,OAAO;AACL,WAAO;AAAA,MACL,UAAU,CAAE;AAAA,MACZ,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,UAAU;AAAA,QACR,EAAE,IAAI,SAAS,MAAM,MAAO;AAAA,QAC5B,EAAE,IAAI,SAAS,MAAM,MAAO;AAAA,QAC5B,EAAE,IAAI,SAAS,MAAM,MAAM;AAAA,MAC7B;AAAA,IACF;AAAA,EACD;AAAA,EACD,OAAO,SAAS;;AACd,SAAK,SAAS,QAAQ,UAAU;AAEhC,SAAK,aAAW,UAAK,SAAS,KAAK,OAAK,EAAE,OAAO,KAAK,MAAM,MAA5C,mBAA+C,OAAM;AACrEA,iBAAAA,cAAc,KAAK,QAAQ,CAAC,QAAQ;AAClC,WAAK,SAAS,KAAK,GAAG;AAAA,KACvB;AAAA,EACF;AAAA,EACD,SAAS;AAAA,IACP,UAAU;AACR,UAAI,CAAC,KAAK;AAAU;AACpBC,mBAAO,QAAC,KAAK,UAAU,KAAK,UAAU,KAAK,MAAM;AACjD,WAAK,SAAS,KAAK,EAAE,MAAM,KAAK,QAAQ,MAAM,KAAK,UAAU;AAC7D,WAAK,WAAW;AAAA,IACjB;AAAA,IACD,iBAAiB,QAAQ;AACvB,WAAK,WAAW;AAAA,IAGlB;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;AC5DA,GAAG,WAAW,eAAe;"}